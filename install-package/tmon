#!/usr/bin/env python3
import sys
import socket
import os

SOCKET_PATH = "/tmp/tmon.sock"

def send_command(command):
    if not os.path.exists(SOCKET_PATH):
        print("‚ùå TerminalMon is not running. Start it with: python3 daemon.py &")
        return

    with socket.socket(socket.AF_UNIX, socket.SOCK_STREAM) as client:
        client.connect(SOCKET_PATH)
        client.sendall(command.encode())
        response = client.recv(4096).decode()
        print(response)

if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Usage: tmon <command>")
        print("Commands: stats, xp <amount>, learn <attack>, quit")
    else:
        cmd = " ".join(sys.argv[1:])
        send_command(cmd)
